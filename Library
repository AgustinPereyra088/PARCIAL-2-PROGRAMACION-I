public class Library {

    private String name;
    private LinkedList<Book> books;
    private LinkedList<Book> waitingList;

    public Library(String name) {
        this.name = name;
        this.books = new LinkedList<>();
        this.waitingList = new LinkedList<>();
    }


    public void addBook(Book book) {
        books.add(book);
    }

    public boolean removeBook(Book book) {
        return books.remove(book);
    }

    public void addBookToWaitingList(Book book) {
        waitingList.add(book);
    }

    public Book peekWaitingList() {
        return waitingList.isEmpty() ? null : waitingList.get(0);
    }

    public Book processNextBook() {
        if (!waitingList.isEmpty()) {
            Book next = waitingList.get(0);
            waitingList.remove(next);
            addBook(next);
            return next;
        }
        return null;
    }

    public Book findBookByIsbn(String isbn) {
        for (int i = 0; i < books.size(); i++) {
            Book b = books.get(i);
            if (b.getIsbn().equals(isbn)) return b;
        }
        return null;
    }

    public LinkedList<Book> findBooksByTitle(String title) {
        LinkedList<Book> results = new LinkedList<>();
        for (int i = 0; i < books.size(); i++) {
            Book b = books.get(i);
            if (b.getTitle().toLowerCase().contains(title.toLowerCase())) {
                results.add(b);
            }
        }
        return results;
    }

    public LinkedList<Book> findBooksByAuthor(String author) {
        LinkedList<Book> results = new LinkedList<>();
        for (int i = 0; i < books.size(); i++) {
            Book b = books.get(i);
            if (b.getAuthor().toLowerCase().contains(author.toLowerCase())) {
                results.add(b);
            }
        }
        return results;
    }

    public LinkedList<Book> getAvailableBooks() {
        LinkedList<Book> available = new LinkedList<>();
        for (int i = 0; i < books.size(); i++) {
            Book b = books.get(i);
            if (b.isAvailable()) available.add(b);
        }
        return available;
    }

    public LinkedList<Book> getLoanedBooks() {
        LinkedList<Book> loaned = new LinkedList<>();
        for (int i = 0; i < books.size(); i++) {
            Book b = books.get(i);
            if (!b.isAvailable()) loaned.add(b);
        }
        return loaned;
    }

    public String getStatistics() {
        int total = books.size();
        int available = getAvailableBooks().size();
        int loaned = getLoanedBooks().size();
        return name + "\n" +
               "Total de Libros: " + total + "\n" +
               "Disponibles: " + available + "\n" +
               "Prestados: " + loaned;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
